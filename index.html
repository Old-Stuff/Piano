<!-- Google Summer of Code 2012: Automagic Music Maker

Primarily written by Myles Borins
Strongly influenced by GSOC Mentor Colin Clark
Using the Infusion framework and Flocking Library


Licensed under the Educational Community License (ECL), Version 2.0 or the New
BSD license. You may not use this file except in compliance with one these
Licenses.

You may obtain a copy of the ECL 2.0 License and BSD License at
https://github.com/fluid-project/infusion/raw/master/Infusion-LICENSE.txt -->

<!DOCTYPE html>
<html>
  <head>
    <!-- This is all so meta -->
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=640" />

    <!-- Le styles -->
    <link href="css/third_party/normalize.css" rel="stylesheet">
    <link rel="stylesheet" href="stylesheets/core.css" media="screen"/>
    <link rel="stylesheet" href="stylesheets/mobile.css" media="handheld, only screen and (max-device-width:640px)"/>
    <link rel="stylesheet" href="stylesheets/pygment_trac.css"/>

    <script type="text/javascript" src="javascripts/modernizr.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="javascripts/headsmart.min.js"></script>
    <title>The Automagic Music Maker by TheAlphaNerd</title>
  </head>

  <body>
    <a id="forkme_banner" href="https://github.com/TheAlphaNerd/Piano">View on GitHub</a>
    <div class="shell">

      <header>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <h1>The Automagic Music Maker</h1>
            <h2></h2>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
      </header>

      <section id="downloads">
        <span class="inner">
          <a href="https://github.com/TheAlphaNerd/Piano/zipball/master" class="zip"><em>download</em> .ZIP</a><a href="https://github.com/TheAlphaNerd/Piano/tarball/master" class="tgz"><em>download</em> .TGZ</a>
        </span>
      </section>


      <span class="banner-fix"></span>


      <section id="main_content">
          <section>
              <div id="instrument">
                  <div id="piano"></div>
                  <div id="gui"></div>
                  <div class="buffer" style="height:50px;"></div>
              </div>
          </section>
          
        <h3><center>Make music, in your browser!</center></h3>
<center>
<p>Built using the flocking audio synthesis library and the fluid infusion framework "The Automagic Music Maker" offers developers and musicians the ability to generate various type of keyboard in the browser.  
<br><br>
Create keyboards with custom sizes, colors, and tunings.  Want a 7 note octave of pink and brown nights, be my guest!  Microtonal compositions with 100 note octaves, our specialty!
<br><br>
Feel free to open up your console right now and start tinkering, the above keyboard is a global object called Instrument
</p>
</center>
<br>
<pre><code>$ instrument.model                     // Take a peak at the model
$ instrument.update("ocataves", 3)     // 3 Octaves
$ instrument.update("aFourFreq", 435)  // 19th Century Austria
$ instrument.update("octaveNotes", 7)  // Just try it!
</code></pre>
<br>
          <div>
              <div style="float:left; width:50%;" id="topleftpiano"></div>
              <div style="float:left; width:50%;" id="toprightpiano"></div>
          </div>
          <div>
              <div style="float:left; width:50%;" id="bottomleftpiano"></div>
              <div style="float:left; width:50%;" id="bottomrightpiano"></div>
          </div>

<center><p>These are just some of the nifty keyboards you can make.</p>

<p>Upcoming features include ARIA support, keyboard binding, touch support, diatonic / scale based filtering, a grid layout, and an arpeggiator</p></center>
      </section>

      <footer>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <p>this project by <a href="https://github.com/TheAlphaNerd">TheAlphaNerd</a> can be found on <a href="https://github.com/TheAlphaNerd/Piano">GitHub</a></p>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
        <p>Generated with <a href="http://pages.github.com">GitHub Pages</a> using Merlot</p>
        <span class="octocat"></span>
      </footer>

    </div>
    
    <!-- Place At the end to make things load faster -->
    <script src="js/third_party/jquery-1.7.2.min.js"></script>
    <script src="js/third_party/flocking.min.js"></script>
    <script src="js/third_party/d3.v2.min.js"></script>
    <script src="js/third_party/MyInfusion.min.js"></script>
    <script src="js/third_party/dat.gui.js"></script>
    <script src="js/automm.min.js"></script>
    <script type/="text/javascript">
    /*global jQuery, fluid*/
    var automm = automm || {};
    var demo = demo || {};
    var instrument = instrument || {};

    (function(){
        "use strict";

        // Draw a piano based on the below model (Subject to change)
        // model: {
        //             firstNote: 60, // Middle C
        //             octaves: 1,
        //             octaveNotes: 12,
        //             afour: 69,
        //             afourFreq: 440,
        //             padding: 50,
        //             pattern: ['white','black','white','black','white','white','black','white','black','white','black','white'],
        //             keys: {
        //                 white: {width: 50, height: 200, stroke: "black", fill: "white", highlight: "yellow", notes: []},
        //                 black: {width: 30, height: 125, stroke: "black", fill: "black", highlight: "yellow", notes: []}
        //             }
        instrument = automm.instrument("#piano", {
             model: {
                 firstNote: 60,
                 octaves: 2,
                 padding: 0,
                 keys: {
                     white: {
                         fill: '#fff000',
                         stroke: '#000000',
                         highlight: '#000000'
                     },
                     black: {
                         fill: '#ffa400',
                         stroke: '#000000',
                         highlight: '#ffffff'
                     }
                 }
             }
        });
        demo.topleftpiano = automm.instrument("#topleftpiano", {
              model: {
                  padding: 50,
                  firstNote: 60,
                  octaves: 4,
                  octaveNotes: 10,
                  keys: {
                      white: {
                          fill: 'yellow',
                          highlight: 'black'
                      },
                      black: {
                          fill: 'orange',
                          highlight: 'white'
                      }
                  }
              }
         });

         demo.toprightpiano = automm.instrument("#toprightpiano", {
               model: {
                   padding: 50,
                   firstNote: 60,
                   octaveNotes: 11,
                   octaves: 4,
                   keys: {
                       white: {
                           fill: 'black',
                           highlight: 'yellow',
                           stroke: 'white'
                       },
                       black: {
                           fill: 'white',
                           highlight: 'orange',
                           Stroke: 'white'
                       }
                   }
               }
          });

          demo.bottomleftpiano = automm.instrument("#bottomleftpiano", {
                model: {
                    padding: 50,
                    firstNote: 61,
                    octaveNotes: 8,
                    octaves: 2,
                    keys: {
                        white: {
                            fill: 'LightSkyBlue',
                            highlight: 'purple'
                        },
                        black: {
                            fill: 'silver',
                            highlight: 'hotpink'
                        }
                    }
                }
           });

           demo.bottomrightpiano = automm.instrument("#bottomrightpiano", {
                 model: {
                     padding: 50,
                     firstNote: 64,
                     octaveNotes: 8,
                     octaves: 2,
                     keys: {
                         white: {
                             fill: 'purple',
                             highlight: 'LightSkyBlue'
                         },
                         black: {
                             fill: 'hotpink',
                             highlight: 'silver'
                         }
                     }
                 }
            });
            var gui = new dat.GUI({ autoPlace: false });
            var customContainer = document.getElementById('gui');
            gui.close();
            customContainer.appendChild(gui.domElement);
            $('#gui').attr('align','center').children().attr('align','left');

            instrument.gui = {}
            instrument.gui.octaves = gui.add(instrument.model, 'octaves', 1, 5);
            instrument.gui.firstNote = gui.add(instrument.model, 'firstNote', 24, 84).step(1);
        
            // Folder for style
            instrument.gui.style = gui.addFolder('Style');
            instrument.gui.padding = instrument.gui.style.add(instrument.model, 'padding', 0, 200);
        
            // Do White Keys
            instrument.gui.whiteKeys = instrument.gui.style.addFolder('White Keys');
            instrument.gui.whiteKeysFill = instrument.gui.whiteKeys.addColor(instrument.model.keys.white, 'fill');
            instrument.gui.whiteKeysStroke = instrument.gui.whiteKeys.addColor(instrument.model.keys.white, 'stroke');
            instrument.gui.whiteKeysHighlight = instrument.gui.whiteKeys.addColor(instrument.model.keys.white, 'highlight');
        
            // Do Black Keys
            instrument.gui.blackKeys = instrument.gui.style.addFolder('Black Keys');
            instrument.gui.blackKeysFill = instrument.gui.blackKeys.addColor(instrument.model.keys.black, 'fill');
            instrument.gui.blackKeysStroke = instrument.gui.blackKeys.addColor(instrument.model.keys.black, 'stroke');
            instrument.gui.blackKeysHighlight = instrument.gui.blackKeys.addColor(instrument.model.keys.black, 'highlight');
        
        
            // Events ~ should be bubbled or at least done cleaner... this is so bad :(
            instrument.gui.octaves.onChange(function(value){
                instrument.update("octaves",value);
            });
            instrument.gui.firstNote.onChange(function(value){
                instrument.update("firstNote",value);
            });
            instrument.gui.padding.onChange(function(value){
                instrument.update("padding",value);
            });
            instrument.gui.whiteKeysFill.onChange(function(value){
                instrument.update("keys.white.fill",value);
            });
            instrument.gui.whiteKeysStroke.onChange(function(value){
                instrument.update("keys.white.stroke",value);
            });
            instrument.gui.whiteKeysHighlight.onChange(function(value){
                instrument.update("keys.white.highlight",value);
            });
            instrument.gui.blackKeysFill.onChange(function(value){
                instrument.update("keys.black.fill",value);
            });
            instrument.gui.blackKeysStroke.onChange(function(value){
                instrument.update("keys.black.stroke",value);
            });
            instrument.gui.blackKeysHighlight.onChange(function(value){
                instrument.update("keys.black.highlight",value);
            });
        }());
    </script>    
    <script type="text/javascript">
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
        try {
            var pageTracker = _gat._getTracker("UA-33512139-1");
            pageTracker._trackPageview();
        } catch(err) {}
    </script>

  </body>
</html>
